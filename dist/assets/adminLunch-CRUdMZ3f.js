import{i as I,d as z,a as j,g as A,s as B,b as R}from"./main-XsaSU9iy.js";import{c as N,a as S}from"./auth-j86TSB5S.js";N();S();I();const x=z(j,"globals","lunch");let b=null;async function h(n,t){clearTimeout(b),b=setTimeout(async()=>{try{await B(x,{vastEten:n,keuzeEten:t,updatedAt:R()},{merge:!0}),console.log("Lunch data opgeslagen")}catch(e){console.error("Fout bij opslaan lunch data:",e)}},500)}function v(){const n=Array.from(i.querySelectorAll("input")).map(e=>e.value.trim()).filter(Boolean),t=Array.from(u.querySelectorAll("input")).map(e=>e.value.trim()).filter(Boolean);return{vastItems:n,keuzeItems:t}}const o=n=>document.getElementById(n),r=o("lunchSchedule"),f=o("btnLunchCreate"),C=o("btnLunchSave"),L=o("btnLunchExportCsv"),i=o("vastEtenList"),g=o("btnAddVastEten");let T=0;function p(n=""){const t=document.createElement("div");t.className="vast-eten-row",t.style.display="flex",t.style.gap="8px",t.style.alignItems="center";const e=document.createElement("input");e.type="text",e.placeholder="Bijv: brood, beleg, fruit",e.value=n,e.style.flex="1",e.dataset.id=T++,e.addEventListener("input",()=>{const{vastItems:l,keuzeItems:s}=v();h(l,s)});const a=document.createElement("button");return a.type="button",a.textContent="✕",a.style.padding="8px 12px",a.addEventListener("click",()=>{t.remove();const{vastItems:l,keuzeItems:s}=v();h(l,s)}),t.appendChild(e),t.appendChild(a),t}(async()=>{try{const n=await A(x);if(n.exists()){const t=n.data(),e=Array.isArray(t.vastEten)?t.vastEten:[];e.length>0?e.forEach(a=>i.appendChild(p(a))):i.appendChild(p())}else i.appendChild(p())}catch(n){console.error("Fout bij laden vast eten:",n),i.appendChild(p())}})();g==null||g.addEventListener("click",()=>{i.appendChild(p())});const u=o("keuzeEtenList"),k=o("btnAddKeuzeEten");let q=0;function m(n=""){const t=document.createElement("div");t.className="keuze-eten-row",t.style.display="flex",t.style.gap="8px",t.style.alignItems="center";const e=document.createElement("input");e.type="text",e.placeholder="Bijv: vegetarisch, halal, vegan",e.value=n,e.style.flex="1",e.dataset.id=q++,e.addEventListener("input",()=>{const{vastItems:l,keuzeItems:s}=v();h(l,s)});const a=document.createElement("button");return a.type="button",a.textContent="✕",a.style.padding="8px 12px",a.addEventListener("click",()=>{t.remove();const{vastItems:l,keuzeItems:s}=v();h(l,s)}),t.appendChild(e),t.appendChild(a),t}(async()=>{try{const n=await A(x);if(n.exists()){const t=n.data(),e=Array.isArray(t.keuzeEten)?t.keuzeEten:[];e.length>0?e.forEach(a=>u.appendChild(m(a))):u.appendChild(m())}else u.appendChild(m())}catch(n){console.error("Fout bij laden keuze eten:",n),u.appendChild(m())}})();k==null||k.addEventListener("click",()=>{u.appendChild(m())});f==null||f.addEventListener("click",()=>{const n=o("lunchDays").value.trim(),t=o("lunchSlots").value.trim();if(!n||!t){alert("Vul dagen en tijdsloten in.");return}const e=n.split(",").map(s=>s.trim()).filter(Boolean),a=t.split(",").map(s=>s.trim()).filter(Boolean);r.innerHTML="",r.style.display="grid",r.style.gridTemplateColumns=`150px repeat(${e.length}, 1fr)`,r.style.gap="8px";const l=document.createElement("div");l.className="row header",l.appendChild(document.createElement("div"));for(const s of e){const c=document.createElement("div");c.textContent=s,c.className="cell head",l.appendChild(c)}r.appendChild(l);for(const s of a){const c=document.createElement("div");c.className="row";const d=document.createElement("div");d.textContent=s,d.className="cell head",c.appendChild(d);for(const w of e){const y=document.createElement("div");y.className="cell";const E=document.createElement("input");E.type="text",E.placeholder="Naam",y.appendChild(E),c.appendChild(y)}r.appendChild(c)}document.getElementById("cardLunchAssign").hidden=!1,document.getElementById("cardLunchExport").hidden=!1});C==null||C.addEventListener("click",()=>{alert("Lunchschema opgeslagen (client-side voorbeeld).")});L==null||L.addEventListener("click",()=>{const t=Array.from(r.querySelectorAll(".row")).map(s=>Array.from(s.querySelectorAll(".cell")).map(c=>{const d=c.querySelector("input");return'"'+(d?d.value:c.textContent||"").replaceAll('"','""')+'"'}).join(",")).join(`
`),e=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="lunchschema.csv",l.click(),URL.revokeObjectURL(a)});
