<!DOCTYPE html>

<html class="" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Wachtwoord Invoeren</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#163e8d",
                        "background-light": "#f6f6f8",
                        "background-dark": "#121720",
                        "accent-yellow": "#F2C438",
                        "accent-rust": "#8C2B07",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
<style>.no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#0D0D0D] dark:text-white font-display transition-colors duration-200 antialiased">
<div class="relative flex h-full min-h-screen w-full flex-col overflow-y-auto no-scrollbar">
<header class="fixed top-0 left-0 right-0 z-50 bg-primary text-white shadow-md">
    <div class="flex items-end p-4 h-16 justify-between" style="align-items:flex-end;">
        <button onclick="history.back()" class="flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-white/10 transition-colors">
            <span class="material-symbols-outlined text-white" style="font-size: 24px;">arrow_back</span>
        </button>
        <h1 class="text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-4">Wachtwoord Invoeren</h1>
        <img id="clubLogo" src="/assets/logo_MC_nieuw_trans_300.gif" alt="Shadow Motorclub" class="h-full ml-3 object-contain" style="height:120%; width:auto; display:block; object-fit:contain; object-position:right bottom; transform-origin:right bottom;" />
    </div>
</header>
<div style="padding-top: 4rem;"></div>
<div class="flex flex-1 flex-col px-6 pt-2 pb-24 max-w-md mx-auto w-full">
<div class="mb-8">
<h1 class="text-3xl font-bold leading-tight tracking-tight mb-3 text-black dark:text-white">
                    Wachtwoord Invoeren
                </h1>
<p class="text-base text-gray-600 dark:text-gray-300 leading-relaxed">
                    Voer hieronder het wachtwoord in dat u van de organisator heeft ontvangen om toegang te krijgen.
                </p>
</div>
<div class="flex flex-col gap-6 w-full">
    <form id="password-form" autocomplete="on">
        <label class="group relative flex flex-col w-full">
            <span class="sr-only">Wachtwoord</span>
            <div class="relative flex w-full items-center rounded-xl transition-all duration-200 focus-within:ring-2 focus-within:ring-primary focus-within:border-primary">
                <input autocomplete="current-password" class="form-input flex w-full flex-1 resize-none rounded-xl border border-gray-300 dark:border-[#364563] bg-white dark:bg-[#1b2331] h-14 pl-4 pr-12 text-base font-normal text-black dark:text-white placeholder:text-gray-400 dark:placeholder:text-[#96a6c5] focus:outline-none focus:ring-0 focus:border-transparent transition-colors" id="password-input" placeholder="Wachtwoord" type="password" value="" />
                <button aria-label="Toggle password visibility" class="absolute right-0 top-0 bottom-0 px-4 flex items-center justify-center text-gray-400 dark:text-[#96a6c5] hover:text-primary dark:hover:text-white transition-colors cursor-pointer" onclick="togglePasswordVisibility()" type="button">
                    <span class="material-symbols-outlined" id="eye-icon" style="font-size: 24px;">visibility</span>
                </button>
            </div>
        </label>
        <button type="submit" id="admin-confirm" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 bg-primary hover:bg-primary/90 active:scale-[0.98] transition-all duration-200 text-white text-base font-bold leading-normal tracking-wide shadow-lg shadow-primary/20 mt-2">
            <span class="truncate">Bevestigen</span>
        </button>
    </form>
</div>
</div>
<div class="h-6 w-full"></div>
</div>
<script>
        function togglePasswordVisibility() {
            const input = document.getElementById('password-input');
            const icon = document.getElementById('eye-icon');
            if (input.type === "password") {
                input.type = "text";
                icon.textContent = "visibility_off";
            } else {
                input.type = "password";
                icon.textContent = "visibility";
            }
        }
        // Module-based admin auth: fetch passwords and navigate to inschrijftafel on match
        (function(){
            // Dynamically load the helper module
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `import { getAdminPasswords } from '../firestore.js';

            async function handleAdminConfirm(ev) {
                if (ev && typeof ev.preventDefault === 'function') ev.preventDefault();
                const input = document.getElementById('password-input');
                const pw = (input?.value || '').trim();
                if (!pw) { alert('Voer een wachtwoord in'); return; }
                try {
                    const p = await getAdminPasswords();
                    const ins = String(p.inschrijftafel || 'Shadow').trim();
                    const hoofd = String(p.hoofdadmin || '1100').trim();
                    // Assign role based on which password matched and persist it to localStorage
                    if (pw === hoofd) {
                        try { localStorage.setItem('role', 'admin'); } catch(_) {}
                        window.location.href = './inschrijftafel.html';
                        return;
                    }
                    if (pw === ins) {
                        try { localStorage.setItem('role', 'inschrijftafel'); } catch(_) {}
                        window.location.href = './inschrijftafel.html';
                        return;
                    }
                    alert('Onjuist wachtwoord');
                } catch (e) {
                    console.error('admin confirm error', e);
                    alert('Fout tijdens verificatie');
                }
            }

            document.getElementById('password-form')?.addEventListener('submit', handleAdminConfirm);
            `;
            document.body.appendChild(script);
        })();

        // Ensure page remains scrollable when mobile keyboard opens and inputs stay visible
        (function(){
            const input = document.getElementById('password-input');
            const container = document.querySelector('.max-w-md');
            if (!input || !container) return;
            input.addEventListener('focus', () => { setTimeout(()=>{ try { input.scrollIntoView({ behavior: 'smooth', block: 'center' }); } catch(e){} }, 300); });
            // Adjust bottom padding based on visualViewport (keyboard height)
            if (window.visualViewport) {
                const apply = () => {
                    const vb = window.visualViewport;
                    const extra = Math.max(0, window.innerHeight - vb.height);
                    try { container.style.paddingBottom = (24 + extra) + 'px'; } catch(e){}
                };
                window.visualViewport.addEventListener('resize', apply);
                // initial apply
                apply();
            }
        })();
    </script>
</body></html>
