<!doctype html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shadow Motorclub</title>
    <!-- Critical inline CSS so splash shows immediately on slow/blank startup (iOS) -->
    <style>
      html,body{height:100%;margin:0;background:#0b0c10}
      .app-splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:20000;background:#0b0c10}
      .splash-inner{width:92vw;text-align:center;padding:20px}
      .splash-logo{width:110px;height:auto;margin:0 auto 12px;display:block}
      .splash-progress{height:10px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden;margin:10px 0}
      .splash-progress-bar{height:100%;background:linear-gradient(90deg,#3b82f6,#06b6d4);width:0%;transition:width .3s ease}
      
      /* Inklapbare pijl: links (ingeklapt) → onder (uitgeklapt) */
      details summary .toggle-icon {
        transform: rotate(-90deg);
      }
      details[open] summary .toggle-icon {
        transform: rotate(0deg);
      }
      details summary::-webkit-details-marker {
        display: none;
      }
      details summary::marker {
        display: none;
      }
    </style>
  <link rel="stylesheet" href="/style.css">
  <!-- Preload main module and important image hints to reduce time-to-interactive / LCP jitter -->
  <link rel="modulepreload" href="/src/main.js">
  <link rel="preload" href="/assets/logo_MC_nieuw_trans_300.gif" as="image">

    <!-- iOS PWA / splash hints -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Add device-specific splash images in assets/ (placeholders below) -->
    <link rel="apple-touch-startup-image" href="/assets/splash-1125x2436.png" media="(device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3)">
    <link rel="apple-touch-startup-image" href="/assets/splash-1242x2688.png" media="(device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:3)">
    <link rel="apple-touch-startup-image" href="/assets/splash-828x1792.png" media="(device-width:414px) and (device-height:896px) and (-webkit-device-pixel-ratio:2)">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="assets/logo_MC_nieuw_trans_300.gif">
    <meta name="theme-color" content="#0f172a">
    
  </head>
  <body>
    <!-- App splash / loader -->
    <div id="appSplash" class="app-splash" aria-hidden="false">
      <div class="splash-inner">
        <img src="assets/logo_MC_nieuw_trans_300.gif" alt="Shadow" class="splash-logo" decoding="async" />
        <div class="splash-title">Shadow Motorclub</div>
        <div class="splash-progress">
          <div class="splash-progress-bar" id="splashProgressBar" style="width:0%"></div>
        </div>
        <div class="splash-caption" id="splashCaption">Laden…</div>
      </div>
    </div>
    <header class="topbar">
  <img id="clubLogo" src="assets/logo_MC_nieuw_trans_300.gif" alt="Shadow Motorclub logo" width="100" height="30" decoding="async" fetchpriority="high"/>
      <nav class="nav">
        <button id="tabMember" class="tab active">Lid</button>
        <button id="tabAdmin" class="tab">Inschrijftafel</button>
      </nav>
    </header>

    <main class="wrap">


      <header id="siteHeader" class="site-header">
      
    </header>
      <section id="viewMember" class="view active">
      <!-- Geplande ritten voor leden (zichtbaar zolang de gebruiker nog niet akkoord heeft gedrukt) -->
      <section id="plannedRidesSection" class="card" aria-labelledby="plannedRidesTitle">
        <h3 id="plannedRidesTitle">Geplande ritten</h3>
        <p class="muted">Hieronder vind je de geplande ritdata. Je ziet deze zolang je nog niet op "Ik ga akkoord" hebt geklikt.</p>
        <ul id="plannedRidesList" class="hint" style="margin-top:8px;"></ul>
      </section>
<section id="rideConsentGate" class="consent card" aria-labelledby="rideConsentTitle">
  <div class="consent__header">
    <h2 id="rideConsentTitle">Voorwaarden deelname</h2>
    <p>Hierbij verklaar ik <strong>voor eigen risico</strong> mee te rijden met deze rit.</p>
  </div>
  <div class="consent__actions">
    <button id="rideConsentBtn" class="btn btn-primary">Ik ga akkoord</button>
  </div>
  <p id="rideConsentWarn" class="msg" role="status" aria-live="polite"></p>
</section>
        <section id="landelijkeSignup" data-ride-signup="true" hidden>
          <div class="card">
            <h1>Inschrijven voor Landelijke rit</h1>
            <p class="hint">Zoek op achternaam (Hoofletter gevoelig) en toon jouw QR.</p>
            
            <div class="row">
              <input id="nameInput" placeholder="Achternaam..." />
            </div>
            
            <!-- Lunch keuze sectie -->
            <div id="lunchChoiceSection" style="display:none; margin-top:24px;"></div>
            <script type="module">
              import { renderLunchChoice } from '/src/lunch-ui.js';
              // Render immediately so `member.js` can find expected elements when it runs
              renderLunchChoice(document.getElementById('lunchChoiceSection'));
            </script>
            
            <div id="yearhangerRow" style="margin-top:8px; display:none;">
              <details open style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%); border-radius: 12px; padding: 20px; border: 1px solid rgba(59, 130, 246, 0.2);">
                <summary style="cursor: pointer; list-style: none; user-select: none; display: flex; align-items: center; gap: 12px;">
                  <div style="flex: 1;">
                    <h3 style="margin: 0; font-size: 20px;">Jaarhanger</h3>
                    <p class="muted" style="margin: 4px 0 0 0; font-size: 14px;">Kies of u dit jaar een jaarhanger wilt</p>
                    <span id="jaarhangerSelectionBadge" style="display: none; padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight: 600; white-space: nowrap;"></span>
                  </div>
                  <span class="toggle-icon" style="font-size: 24px; transition: transform 0.3s ease;">▼</span>
                </summary>

                <div class="jaarhanger-content" style="margin-top: 16px;">
                  <div class="seg-wrap">
                    <div class="seg-toggle" id="yearhangerToggle" role="radiogroup" aria-label="Jaarhanger">
                      <button type="button" id="yearhangerYes" class="seg-btn" role="radio" aria-checked="false" style="flex: 1; padding: 14px; font-size: 16px; font-weight: 600;">
                        ✓ Ja, ik wil een jaarhanger
                      </button>
                      <button type="button" id="yearhangerNo" class="seg-btn" role="radio" aria-checked="false" style="flex: 1; padding: 14px; font-size: 16px; font-weight: 600;">
                        ✕ Nee, ik hoef geen jaarhanger
                      </button>
                    </div>
                  </div>

                  <div id="jaarhangerInfo" style="display:none; margin: 16px 0 8px 0;">
                    <details class="muted" style="margin-top:4px;">
                      <summary>Wat is een jaarhanger?</summary>
                      <div style="margin-top:8px;">
                        Het aantal sterren geeft aan hoeveel landelijke ritten je dat jaar gereden hebt. De "moederpin" kan je als Shadow lid bestellen in de webshop, zodat je jouw jaarhangers mooi op je vest kwijt kunt. De jaarhangers zijn niet te koop en kan je alleen verdienen door mee te rijden met de landelijke ritten. Da's pas een collectors item!
                      </div>
                    </details>
                  </div>
                </div>
              </details>
            </div>

            <ul id="suggestions" class="suggest"></ul>
            <div id="error" class="error" style="display:none"></div>
            <div id="loadingIndicator" class="loading-indicator" style="display:none;">
              <div class="spinner"></div>
              <span class="loading-text">Gegevens laden...</span>
            </div>
            <div id="result" class="result" style="display:none">
              <div class="column">
                <div class="kv"><span class="label">Naam</span><span class="value" id="rName">—</span></div>
                <div class="kv"><span class="label">LidNr</span><span class="value" id="rMemberNo">—</span></div>
                <div class="kv"><span class="label">Gereden ritten</span><span class="value" id="rRidesCount">—</span></div>
                <div class="kv"><span class="label">Regio</span><span class="value" id="rRegion">—</span></div>
                <p>Ga nu naar de inschrijfbalie om in te checken voor de rit.</p>
              </div>
              <div class="column" style="align-items:center; gap:8px;">
                <canvas id="qrCanvas" width="220" height="220" aria-label="QR-code"></canvas>
                <div class="small muted" id="qrPrivacy" style="display:none">
                  Privacy: de QR bevat alleen een LidNr, geen naam.
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>

      <!-- Adminsecties zijn verplaatst naar aparte pagina's (admin-*.html). -->
    </main>

    <div id="toast-root" aria-live="polite" aria-atomic="true"></div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
